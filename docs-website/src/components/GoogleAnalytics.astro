<script is:inline>
  const googleAnalyticsId = 'G-1W9ZRN5898';

  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  // Set default
  gtag('consent', 'default', {
    ad_storage: 'denied',
    ad_user_data: 'denied',
    ad_personalization: 'denied',
    analytics_storage: 'denied',
  });
  // Load script
  const script = document.createElement('script');
  script.async = true;
  script.src = `https://www.googletagmanager.com/gtag/js?id=${googleAnalyticsId}`;
  document.head.appendChild(script);
  gtag('js', new Date());
  gtag('config', googleAnalyticsId, {
    anonymize_ip: true,
  });

  function acceptCookies() {
    document.cookie = 'consent_given=true; path=/; max-age=31536000'; // 1 year expiry
    giveConsent();
    document.getElementById('cookie-banner').style.display = 'none';
  }

  function declineCookies() {
    document.cookie = 'consent_given=false; path=/; max-age=31536000'; // 1 year expiry
    document.getElementById('cookie-banner').style.display = 'none';
  }

  function giveConsent() {
    gtag('consent', 'update', {
      ad_storage: 'granted',
      ad_user_data: 'granted',
      ad_personalization: 'granted',
      analytics_storage: 'granted',
    });
  }

  window.onload = function () {
    if (document.cookie.includes('consent_given=true')) {
      giveConsent();
    } else {
      // No consent given, show cookie banner
      document.getElementById('cookie-banner').style.display = 'block';
    }
  };
</script>
<!-- Cookie banner -->
<div
  id="cookie-banner"
  class="fixed hidden bottom-0 left-0 right-0 bg-gray-800 text-white p-4 flex flex-col md:flex-row justify-between items-center"
>
  <div
    class="container mx-auto flex flex-col md:flex-row justify-between items-center"
  >
    <p class="text-sm mb-4 md:mb-0">
      We use cookies to analyze site traffic and improve your experience. By
      clicking "Accept", you agree to our use of analytics cookies. You can
      change your preference at any time in your browser settings.
    </p>
    <div class="flex gap-4">
      <button
        onclick="declineCookies()"
        class="px-4 py-2 text-sm border border-white rounded-md hover:bg-gray-700"
      >
        Decline
      </button>
      <button
        onclick="acceptCookies()"
        class="px-4 py-2 text-sm border border-white rounded-md hover:bg-gray-700"
      >
        Accept
      </button>
    </div>
  </div>
</div>
